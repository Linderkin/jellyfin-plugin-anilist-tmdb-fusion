<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>AniList + TMDb Fusion - Configuraci√≥n</title>
</head>
<body>
    <div class="verticalSection">
        <h2>AniList + TMDb Fusion</h2>
        <div class="formGroup">
            <label for="TmdbApiKey">TMDb API Key:</label>
            <input id="TmdbApiKey" type="text" />
        </div>
        <button id="saveConfig" class="raised button-submit block">Guardar</button>
    </div>

    <script>
        const pluginId = "8d7a3a6d-1b23-4c77-9b8a-a12d3f4e9e7d";

        async function loadConfig() {
            const response = await ApiClient.getPluginConfiguration(pluginId);
            document.querySelector('#TmdbApiKey').value = response.TmdbApiKey || "";
        }

        document.querySelector('#saveConfig').addEventListener('click', async () => {
            const config = await ApiClient.getPluginConfiguration(pluginId);
            config.TmdbApiKey = document.querySelector('#TmdbApiKey').value;
            await ApiClient.updatePluginConfiguration(pluginId, config);
            Dashboard.processPluginConfigurationUpdateResult();
        });

        loadConfig();
    </script>
</body>
</html>
